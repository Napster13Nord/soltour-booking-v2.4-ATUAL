{
	"info": {
		"_postman_id": "92e620e0-34b6-4607-aa11-daa2e46efb6b",
		"name": "External Booking API V5 (Package for clients)",
		"description": "Documentación oficial:  \n[https://anypoint.mulesoft.com/exchange/portals/grupo-pinero/4c5b8f6c-0146-4a34-b94e-880fdc90912e/external-booking-service-api/](https://anypoint.mulesoft.com/exchange/portals/grupo-pinero/4c5b8f6c-0146-4a34-b94e-880fdc90912e/external-booking-service-api/)",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "26708528",
		"_collection_link": "https://winter-meadow-254770.postman.co/workspace/Soltour~a372f154-c775-43f2-b2fc-b50ceb541d18/collection/26708528-92e620e0-34b6-4607-aa11-daa2e46efb6b?action=share&source=collection_link&creator=26708528"
	},
	"item": [
		{
			"name": "Login",
			"item": [
				{
					"name": "login ES",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.globals.set(\"token-external-gpi-v5\",  pm.response.json().sessionToken );"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"brand\":\"SOLTOUR\",\n\t\"market\": \"XMLES\",\n\t\"languageCode\": \"ES\",\n\t\"username\": \"{{username}}\",\n\t\"password\":\"{{password}}\"\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}login/login",
							"host": [
								"{{ws-v5-base}}login"
							],
							"path": [
								"login"
							]
						},
						"description": "*Login atacando a external-booking-ws*\n\nParámetros necesarios de LoginRq:\n- brand\n- market\n- username\n- password\n\nRetorna: LoginRs."
					},
					"response": []
				},
				{
					"name": "login PT",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.globals.set(\"token-external-gpi-v5\",  pm.response.json().sessionToken );"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"brand\":\"SOLTOUR\",\n\t\"market\": \"XMLPT\",\n\t\"languageCode\": \"PT\",\n\t\"username\": \"{{username}}\",\n\t\"password\":\"{{password}}\"\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}login/login",
							"host": [
								"{{ws-v5-base}}login"
							],
							"path": [
								"login"
							]
						},
						"description": "*Login atacando a external-booking-ws*\n\nParámetros necesarios de LoginRq:\n- brand\n- market\n- username\n- password\n\nRetorna: LoginRs."
					},
					"response": []
				},
				{
					"name": "logout",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{token-external-gpi-v5}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"sessionToken\" : \"{{token-external-gpi-v5}}\"\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}login/logout",
							"host": [
								"{{ws-v5-base}}login"
							],
							"path": [
								"logout"
							]
						},
						"description": "*Logout atacando a external-booking-ws*\n\nParámetros necesarios de LogoutRq:\n- sessionToken\n\nRetorna: CommonRs."
					},
					"response": []
				},
				{
					"name": "getUserInformation",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{token-external-gpi-v5}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{ws-v5-base}}login/getUserInformation",
							"host": [
								"{{ws-v5-base}}login"
							],
							"path": [
								"getUserInformation"
							]
						},
						"description": "*Obtiene la nformación de usuario atacando a external-booking-ws*\n\nParámetros necesarios de UserInformationRq:\n- TODO\n\nRetorna: UserInformationRs."
					},
					"response": []
				},
				{
					"name": "verifySessionToken",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.globals.set(\"token-external-gpi-v5\",  pm.response.json().sessionToken );"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"brand\":\"SOLTOUR\",\n    \"sessionToken\" : \"{{token-external-gpi-v5}}\"\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}login/verifySessionToken",
							"host": [
								"{{ws-v5-base}}login"
							],
							"path": [
								"verifySessionToken"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Masters",
			"item": [
				{
					"name": "getAirports",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"productType\": \"PACKAGE\",\n\t\"hint\":\"Palma d\"\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}master/getAirports",
							"host": [
								"{{ws-v5-base}}master"
							],
							"path": [
								"getAirports"
							]
						},
						"description": "*Obtención de aeropuertos atacando a external-booking-ws*\n\nHeaders necesarios:\n- Authorization: token JWT.\n\nParámetros necesarios:\n- productType (soportados: todos)\n- hint (query de búsqueda)\n\nBrands soportadas:\n- SOLTOUR"
					},
					"response": []
				},
				{
					"name": "getAllDestinations",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"productType\": \"PACKAGE\"\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}master/getAllDestinations",
							"host": [
								"{{ws-v5-base}}master"
							],
							"path": [
								"getAllDestinations"
							]
						},
						"description": "*Obtención de todos los destinos de un tipo de producto atacando a external-booking-ws*\n\nHeaders necesarios:\n- Authorization: token JWT.\n\nParámetros necesarios:\n- productType (soportados: [EXCURSION, TRANSFER, HOTEL, FLIGHTHOTEL, CUSTOMTOUR, PACKAGE])\n- query (obligatorio para productType = [FLIGHTHOTEL, HOTEL])\n\nBrands soportadas:\n- SOLTOUR"
					},
					"response": []
				},
				{
					"name": "getAllOrigins",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"productType\": \"PACKAGE\",\n\t\"destinationCode\" : \"LXR\"\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}master/getAllOrigins",
							"host": [
								"{{ws-v5-base}}master"
							],
							"path": [
								"getAllOrigins"
							]
						},
						"description": "*Obtención de todos los orígenes de un tipo de producto atacando a external-booking-ws*\n\nHeaders necesarios:\n- Authorization: token JWT.\n\nParámetros necesarios:\n- productType (soportados: [FLIGHTHOTEL, CUSTOMTOUR, PACKAGE])\n- query (pdte de confirmación)\n\nBrands soportadas:\n- SOLTOUR"
					},
					"response": []
				},
				{
					"name": "getCategories",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"code\" : null\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}master/getCategories",
							"host": [
								"{{ws-v5-base}}master"
							],
							"path": [
								"getCategories"
							]
						},
						"description": "*Obtención de todos los orígenes de un tipo de producto atacando a external-booking-ws*\n\nHeaders necesarios:\n- Authorization: token JWT.\n\nParámetros necesarios:\n- productType (soportados: [FLIGHTHOTEL, CUSTOMTOUR, PACKAGE])\n- query (pdte de confirmación)\n\nBrands soportadas:\n- SOLTOUR"
					},
					"response": []
				},
				{
					"name": "getMealPlans",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"code\" : null\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}master/getMealPlans",
							"host": [
								"{{ws-v5-base}}master"
							],
							"path": [
								"getMealPlans"
							]
						},
						"description": "*Obtención de todos los orígenes de un tipo de producto atacando a external-booking-ws*\n\nHeaders necesarios:\n- Authorization: token JWT.\n\nParámetros necesarios:\n- productType (soportados: [FLIGHTHOTEL, CUSTOMTOUR, PACKAGE])\n- query (pdte de confirmación)\n\nBrands soportadas:\n- SOLTOUR"
					},
					"response": []
				},
				{
					"name": "getAirlines",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token-external-gpi-v5}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{ws-v5-base}}master/getAirlines",
							"host": [
								"{{ws-v5-base}}master"
							],
							"path": [
								"getAirlines"
							]
						}
					},
					"response": []
				},
				{
					"name": "getRoomTypes",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"code\" : null\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}master/getRoomTypes",
							"host": [
								"{{ws-v5-base}}master"
							],
							"path": [
								"getRoomTypes"
							]
						}
					},
					"response": []
				},
				{
					"name": "getHotels",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"productType\" : \"PACKAGE\",\n    \"destinationCode\" : \"PMI\"\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}master/getHotels",
							"host": [
								"{{ws-v5-base}}master"
							],
							"path": [
								"getHotels"
							]
						}
					},
					"response": []
				},
				{
					"name": "getProductsCatalogue",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"destinationCode\" : \"PUJ\"\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}master/getProductsCatalogue",
							"host": [
								"{{ws-v5-base}}master"
							],
							"path": [
								"getProductsCatalogue"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Booking",
			"item": [
				{
					"name": "getAvailableCalendarMonths",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "{{token-external-gpi-v5}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"productType\" : \"PACKAGE\",\n\t\"originCode\" : \"MAD\",\n\t\"destinationCode\" : \"PUJ\"\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}booking/getAvailableCalendarMonths",
							"host": [
								"{{ws-v5-base}}booking"
							],
							"path": [
								"getAvailableCalendarMonths"
							]
						}
					},
					"response": []
				},
				{
					"name": "getPriceCalendar",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"productType\" : \"PACKAGE\",\n\t\"originCode\" : \"MAD\",\n\t\"destinationCode\" : \"PUJ\",\n\t\"month\" : {\n\t\t\"month\" : 5,\n\t\t\"year\" : 2024\n\t},\n\t\"onlyDirectFlights\" : \"false\",\n\t\"immediatePay\" : \"false\",\n\t\"residentDiscount\" : \"NONE\",\n\t\"numNights\" : 7\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}booking/getPriceCalendar",
							"host": [
								"{{ws-v5-base}}booking"
							],
							"path": [
								"getPriceCalendar"
							]
						}
					},
					"response": []
				},
				{
					"name": "availability",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.globals.set(\"availToken-external-gpi-v5\",  pm.response.json().availToken );",
									"pm.globals.set(\"budgetId-external-gpi-v5\",  pm.response.json().budgets[0].budgetId );",
									"pm.globals.set(\"hotelCode-external-gpi-v5\",  pm.response.json().budgets[0].hotelServices[0].hotelCode );",
									"pm.globals.set(\"providerCode-external-gpi-v5\",  pm.response.json().budgets[0].hotelServices[0].providerCode );"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const moment = require('moment');\r",
									"pm.globals.set(\"today\", moment().format(\"YYYY-MM-DD\"));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n        \"availToken\": null,\n        \"criteria\": {\n            \"filters\": null,\n            \"order\": {\n                \"filters\": null,\n                \"order\": null,\n                \"pagination\": null,\n                \"type\": \"PRICE\",\n                \"direction\": \"ASC\"\n            },\n            \"pagination\": {\n                \"firstItem\": 0,\n                \"itemCount\": 10\n            }\n        },\n        \"languageCode\": \"ES\",\n        \"params\": {\n            \"accomodation\": {\n                \"rooms\": [\n                    {\n                        \"passengers\": [\n                            {\n                                \"adultRelationed\": null,\n                                \"age\": \"30\",\n                                \"birthDate\": null,\n                                \"child\": null,\n                                \"contactInfo\": null,\n                                \"documentNumber\": null,\n                                \"documentType\": null,\n                                \"documentation\": null,\n                                \"firstName\": null,\n                                \"flightsDiscount\": null,\n                                \"flightsOptionalServiceLists\": null,\n                                \"flightsTicket\": null,\n                                \"gender\": null,\n                                \"identification\": 1,\n                                \"lastName1\": null,\n                                \"lastName2\": null,\n                                \"nationality\": null,\n                                \"residentCode\": null,\n                                \"roomNumber\": null,\n                                \"sex\": null,\n                                \"type\": \"ADULT\",\n                                \"youth\": null\n                            },\n                            {\n                                \"adultRelationed\": null,\n                                \"age\": \"30\",\n                                \"birthDate\": null,\n                                \"child\": null,\n                                \"contactInfo\": null,\n                                \"documentNumber\": null,\n                                \"documentType\": null,\n                                \"documentation\": null,\n                                \"firstName\": null,\n                                \"flightsDiscount\": null,\n                                \"flightsOptionalServiceLists\": null,\n                                \"flightsTicket\": null,\n                                \"gender\": null,\n                                \"identification\": 2,\n                                \"lastName1\": null,\n                                \"lastName2\": null,\n                                \"nationality\": null,\n                                \"residentCode\": null,\n                                \"roomNumber\": null,\n                                \"sex\": null,\n                                \"type\": \"ADULT\",\n                                \"youth\": null\n                            }\n                        ]\n                    }\n                ]\n            },\n            \"carParams\": null,\n            \"customTourParams\": null,\n            \"endDate\": \"2024-05-11\",\n            \"excursionParams\": null,\n            \"flightParams\": {\n                \"directFlightsOnly\": false,\n                \"includeImmediatePayment\": true,\n                \"itineraries\": [\n                    {\n                        \"arrivalTimeWindow\": null,\n                        \"companyCode\": null,\n                        \"departureTimeWindow\": null,\n                        \"destinations\": [\n                            \"PUJ\"\n                        ],\n                        \"flightDate\": null,\n                        \"origins\": [\n                            \"MAD\"\n                        ]\n                    }\n                ]\n            },\n            \"hotelParams\": {\n                \"categoryCode\": null,\n                \"destinationCode\": \"PUJ\",\n                \"includeImmediatePayment\": true,\n                \"mealPlan\": null,\n                \"zone\": null\n            },\n            \"preCalculation\": true,\n            \"residentType\": \"NONE\",\n            \"startDate\": \"2024-05-04\",\n            \"transferParams\": null,\n            \"forceSpecialProduct\": false\n        },\n        \"productType\": \"PACKAGE\"\n    }"
						},
						"url": {
							"raw": "{{ws-v5-base}}booking/availability",
							"host": [
								"{{ws-v5-base}}booking"
							],
							"path": [
								"availability"
							]
						}
					},
					"response": []
				},
				{
					"name": "availability filter",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.globals.set(\"availToken-external-gpi-v5\",  pm.response.json().availToken );",
									"pm.globals.set(\"budgetId-external-gpi-v5\",  pm.response.json().budgets[0].budgetId );",
									"pm.globals.set(\"hotelCode-external-gpi-v5\",  pm.response.json().budgets[0].hotelServices[0].hotelCode );",
									"pm.globals.set(\"providerCode-external-gpi-v5\",  pm.response.json().budgets[0].hotelServices[0].providerCode );"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const moment = require('moment');\r",
									"pm.globals.set(\"today\", moment().format(\"YYYY-MM-DD\"));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"criteria\": {\n    \"filters\": [\n      {\n        \"type\": \"CATEGORY\",\n        \"values\": [\n          \"H*****\"\n        ]\n      }\n    ],\n    \"order\": {\n      \"type\": \"PRICE\",\n      \"direction\": \"ASC\"\n    },\n    \"pagination\": {\n      \"firstItem\": 0,\n      \"itemCount\": 10\n    }\n  },\n  \"params\": {},\n  \"productType\": \"PACKAGE\",\n  \"availToken\": \"{{availToken-external-gpi-v5}}\"\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}booking/availability",
							"host": [
								"{{ws-v5-base}}booking"
							],
							"path": [
								"availability"
							]
						}
					},
					"response": []
				},
				{
					"name": "availability paginate",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.globals.set(\"availToken-external-gpi-v5\",  pm.response.json().availToken );",
									"pm.globals.set(\"budgetId-external-gpi-v5\",  pm.response.json().budgets[0].budgetId );",
									"pm.globals.set(\"hotelCode-external-gpi-v5\",  pm.response.json().budgets[0].hotelServices[0].hotelCode );",
									"pm.globals.set(\"providerCode-external-gpi-v5\",  pm.response.json().budgets[0].hotelServices[0].providerCode );"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const moment = require('moment');\r",
									"pm.globals.set(\"today\", moment().format(\"YYYY-MM-DD\"));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"productType\" : \"PACKAGE\",\n\t\"criteria\" : {\n\t\t\"order\" : {\n\t\t\t\"direction\" : \"ASC\",\n\t\t\t\"type\" : \"PRICE\"\n\t\t},\n\t\t\"pagination\" : {\n\t\t\t\"firstItem\" : 10,\n\t\t\t\"itemCount\" : 10\n\t\t}\n\t},\n\t\"params\":{\n\t\t\"startDate\" : \"2024-05-04\",\n\t\t\"endDate\" : \"2024-05-11\",\n\t\t\"residentType\" : \"NONE\",\n\t\t\"accomodation\" : {\n\t\t\t\"rooms\" : [\n\t\t\t\t{\n\t\t\t\t\t\"passengers\" : [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"age\" : 35,\n\t\t\t\t\t\t\t\"type\" : \"ADULT\"\n\t\t\t\t\t\t}\t\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t\"hotelParams\" : {\n\t\t\t\"destinationCode\" : \"PUJ\"\n\t\t},\n\t\t\"flightParams\" : {\n\t\t\t\"itineraries\" : [\n\t\t\t\t{\n\t\t\t\t    \"origins\" : [\"MAD\"],\n\t\t\t\t    \"destinations\" : [\"PUJ\"]\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t}\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}booking/availability",
							"host": [
								"{{ws-v5-base}}booking"
							],
							"path": [
								"availability"
							]
						}
					},
					"response": []
				},
				{
					"name": "details",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"productType\" : \"PACKAGE\",\n\t\"availToken\" : \"{{availToken-external-gpi-v5}}\",\n\t\"budgetId\" : \"{{budgetId-external-gpi-v5}}\",\n\t\"hotelParams\" : {\n\t\t\"hotelCode\" : \"{{hotelCode-external-gpi-v5}}\",\n\t\t\"providerCode\" : \"{{providerCode-external-gpi-v5}}\"\n\t}\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}booking/details",
							"host": [
								"{{ws-v5-base}}booking"
							],
							"path": [
								"details"
							]
						}
					},
					"response": []
				},
				{
					"name": "getAlternatives",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.globals.set(\"alternativeAvailToken-external-gpi-v5\",  pm.response.json().availToken );",
									"pm.globals.set(\"alternativeBudgetId-external-gpi-v5\",  pm.response.json().budgets[0].budgetId );"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"productType\" : \"PACKAGE\",\n\t\"availToken\" : \"{{availToken-external-gpi-v5}}\",\n\t\"budgetId\" : \"{{budgetId-external-gpi-v5}}\",\n\t\"criteria\" : {\n\t\t\"order\" : {\n\t\t\t\"direction\" : \"ASC\",\n\t\t\t\"type\" : \"PRICE\"\n\t\t},\n\t\t\"pagination\" : {\n\t\t\t\"firstItem\" : 0,\n\t\t\t\"itemCount\" : 10\n\t\t}\n\t}\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}booking/getAlternatives",
							"host": [
								"{{ws-v5-base}}booking"
							],
							"path": [
								"getAlternatives"
							]
						}
					},
					"response": []
				},
				{
					"name": "fetchAvailability",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"productType\" : \"PACKAGE\",\n\t\"availToken\" : \"{{availToken-external-gpi-v5}}\",\n\t\"selectedBudgetId\" : \"{{alternativeBudgetId-external-gpi-v5}}\"\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}booking/fetchAvailability",
							"host": [
								"{{ws-v5-base}}booking"
							],
							"path": [
								"fetchAvailability"
							]
						}
					},
					"response": []
				},
				{
					"name": "quote",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"productType\" : \"PACKAGE\",\n\t\"availToken\" : \"{{availToken-external-gpi-v5}}\",\n\t\"budgetIds\" : [\"{{budgetId-external-gpi-v5}}\"]\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}booking/quote",
							"host": [
								"{{ws-v5-base}}booking"
							],
							"path": [
								"quote"
							]
						}
					},
					"response": []
				},
				{
					"name": "generateExpedient",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.globals.set(\"expedient-external-gpi-v5\",  pm.response.json().expedient );"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"destination\": \"PUJ\",\r\n    \"productType\": \"PACKAGE\",\r\n    \"availToken\" : \"{{availtoken-external-gpi-v5}}\",\r\n    \"bookingHolder\": {\r\n        \"email\": \"holder@email.com\",\r\n        \"firstName\": \"holderName\",\r\n        \"lastName1\": \"holderLastName\",\r\n        \"lastName2\": \"holderLastName2\"\r\n    },\r\n    \"startDate\" : \"2024-05-04\",\r\n    \"agencyBookingReference\": \"agencyExpedient\"\r\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}booking/generateExpedient",
							"host": [
								"{{ws-v5-base}}booking"
							],
							"path": [
								"generateExpedient"
							]
						}
					},
					"response": []
				},
				{
					"name": "book",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.globals.set(\"bookingReference-external-gpi-v5\",  pm.response.json().booking.bookingHeader.bookingReference );"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"availToken\" : \"{{availToken-external-gpi-v5}}\",\n  \"accomodation\" : {\n    \"rooms\" :  [\n      {\n        \"passengers\" :  [\n          {\n            \"age\" : 35,\n            \"identification\" : 0,\n            \"firstName\" : \"paxName\",\n            \"lastName1\" : \"paxLastName\",\n            \"lastName2\" : \"paxLastName2\",\n            \"gender\" : \"MAN\",\n            \"type\" : \"ADULT\"\n          },\n           {\n            \"age\" : 35,\n            \"identification\" : 0,\n            \"firstName\" : \"paxName_t\",\n            \"lastName1\" : \"paxLastName_t\",\n            \"lastName2\" : \"paxLastName2_t\",\n            \"gender\" : \"MAN\",\n            \"type\" : \"ADULT\"\n          }\n        ]\n      }\n    ]\n  },\n  \"commonBookingData\" : {\n    \"agencyExpedient\" : \"1234567890\",\n    \"agent\" : \"agent\",\n    \"email\" : \"agent@email.com\",\n    \"expedient\" : \"{{expedient-external-gpi-v5}}\",\n    \"observations\" : \"Observations\",\n    \"phoneNumber\" : \"111 111 111\",\n    \"userName\" : \"{{username}}\",\n    \"channel\" : \"WEB\"\n  },\n  \"productType\" : \"PACKAGE\"\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}booking/book",
							"host": [
								"{{ws-v5-base}}booking"
							],
							"path": [
								"book"
							]
						}
					},
					"response": []
				},
				{
					"name": "validateBooking",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"bookingReference\" : \"{{bookingReference-external-gpi-v5}}\"\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}booking/validateBooking",
							"host": [
								"{{ws-v5-base}}booking"
							],
							"path": [
								"validateBooking"
							]
						}
					},
					"response": []
				},
				{
					"name": "read",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"expedient\" : \"{{expedient-external-gpi-v5}}\"\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}booking/read",
							"host": [
								"{{ws-v5-base}}booking"
							],
							"path": [
								"read"
							]
						}
					},
					"response": []
				},
				{
					"name": "cancel",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"expedient\" : \"{{expedient-external-gpi-v5}}\",\n\t\"preCancellation\" : true\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}booking/cancel",
							"host": [
								"{{ws-v5-base}}booking"
							],
							"path": [
								"cancel"
							]
						}
					},
					"response": []
				},
				{
					"name": "getExistingReservations",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token-external-gpi-v5}}"
							},
							{
								"key": "MULESOFT_CLIENT_SECRET",
								"value": "{{mulesoft-client-secret}}",
								"type": "text"
							},
							{
								"key": "MULESOFT_CLIENT_ID",
								"value": "{{mulesoft-client-id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": " {\r\n  \"creationEndDate\" : \"2023-09-04\",\r\n  \"creationStartDate\" : \"2023-07-10\",\r\n  \"showCanceled\" : true\r\n}"
						},
						"url": {
							"raw": "{{ws-v5-base}}booking/getExistingReservations",
							"host": [
								"{{ws-v5-base}}booking"
							],
							"path": [
								"getExistingReservations"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "ws-v5-base",
			"value": "https://soltour-svcext.grupo-pinero.com/soltour/v5/",
			"type": "string"
		},
		{
			"key": "username",
			"value": "",
			"type": "string"
		},
		{
			"key": "password",
			"value": "",
			"type": "string"
		},
		{
			"key": "mulesoft-client-id",
			"value": "",
			"type": "string"
		},
		{
			"key": "mulesoft-client-secret",
			"value": "",
			"type": "string"
		}
	]
}